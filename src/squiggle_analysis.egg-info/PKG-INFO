Metadata-Version: 2.4
Name: squiggle-analysis
Version: 0.1.0
Summary: Analysis CLI and reporting for geometry extraction, event detection, and squiggle summaries.
Author: Todd Michaud
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: numpy>=1.26
Requires-Dist: pandas>=2.2
Requires-Dist: pyarrow>=15.0
Requires-Dist: matplotlib>=3.8
Requires-Dist: tqdm>=4.66
Requires-Dist: tabulate>=0.9
Requires-Dist: squiggle-core>=0.1.0
Provides-Extra: dev
Requires-Dist: pytest>=8.0; extra == "dev"
Requires-Dist: ruff>=0.6; extra == "dev"

# squiggle-analysis â€” **Geometry, events, reports**

### `squiggle-analysis/README.md`

```md
# squiggle-analysis

Post-training analysis pipeline for Squiggle runs.

This repo consumes artifacts written by `squiggle-experiments`
and produces interpretable summaries of model behavior.

## Pipeline Overview

For a given `run_id`, analysis proceeds in order:

1. **Geometry computation**
2. **Event detection**
3. **Report generation**

Each step writes a stable artifact and can be re-run independently.

## Geometry State

Geometry is computed from captured activations and written to:

- `geometry_state/<run_id>.parquet`

Current metrics include:
- `effective_rank`
- `topk_mass_k8`

The geometry state is treated as *ground truth* for downstream analysis.

## Events

Events detect significant geometric change over time.

- Interval-based (`start_step`, `end_step`)
- Metric-aware thresholds
- Layer-specific

Event candidates are scored using the shared scoring implementation in `squiggle_core.scoring`.

Supported event types:
- `change_point` (single metric)
- `change_point_composite` (multi-metric; `metric = __composite__`)

Events are written to:

- `events_candidates/<run_id>.parquet` 

Optional baseline usage:
- score against a designated baseline run (`baseline_run_id`) or a persisted baseline artifact (`baseline_id`)


## Reporting

Each run produces a human-readable report:

- `runs/<run_id>/reports/report.md`


The report summarizes:
- Training scalars
- Probe performance
- Capture inventory
- Geometry metrics
- Top detected events

Reports are intended to be:
- Shareable
- Diffable
- Durable

## CLI

Run full analysis:

python -m squiggle_analysis --run-id <RUN_ID>


Force recompute:
python -m squiggle_analysis --run-id <RUN_ID> --force
